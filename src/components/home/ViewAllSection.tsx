import { formatDate, getPosts } from "@/lib/actions"
import { IPost } from "@/lib/types"
import Image from "next/image"

export default async function ViewAllSection() {
  const posts: IPost[] = await getPosts(5)

  return (
    <section className="mt-14 bg-[#151618]">
      <div className="container mx-auto pt-[50px] pb-[85px]">
        <div className="flex items-center gap-x-[15px] justify-end">
          <div className="text-white text-xs font-medium">View All</div>
          <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M13.8562 8.35623L9.35625 12.8562C9.26068 12.9486 9.13294 13.0003 9 13.0003C8.86706 13.0003 8.73932 12.9486 8.64375 12.8562C8.54986 12.7614 8.49719 12.6334 8.49719 12.5C8.49719 12.3666 8.54986 12.2385 8.64375 12.1437L12.2937 8.49998H2.5C2.36739 8.49998 2.24021 8.4473 2.14645 8.35353C2.05268 8.25977 2 8.13259 2 7.99998C2 7.86737 2.05268 7.7402 2.14645 7.64643C2.24021 7.55266 2.36739 7.49998 2.5 7.49998H12.2937L8.64375 3.85623C8.56402 3.75908 8.52327 3.63575 8.52944 3.51023C8.5356 3.3847 8.58824 3.26595 8.6771 3.17709C8.76597 3.08822 8.88472 3.03558 9.01024 3.02942C9.13577 3.02325 9.2591 3.064 9.35625 3.14373L13.8562 7.64373C13.9501 7.73853 14.0028 7.86656 14.0028 7.99998C14.0028 8.1334 13.9501 8.26143 13.8562 8.35623Z" fill="white"/>
            </svg>
          </div>
        </div>
        <div className="mt-5 flex justify-around gap-x-[51px]">
          <div className={`bg-[url('https://cdn.discordapp.com/attachments/1086616867264811090/1153991537886236682/d29a6641d1afaedba266dbad36614c3d.png')] w-[525px] h-[430px] bg-cover bg-no-repeat bg-center`}>
            <div className="h-full bg-black bg-opacity-50 grid content-end py-6 px-7">
              <div className="flex items-center gap-x-[15px] text-xs text-white">
                <div className="bg-[#4F95FF] font-medium py-[5px] px-[15px]">
                  {posts[0].category}
                </div>
                <div className="flex items-center gap-x-[5px]">
                  <div>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                      fill="none"
                    >
                      <path
                        d="M13 2H11.5V1.5C11.5 1.36739 11.4473 1.24021 11.3536 1.14645C11.2598 1.05268 11.1326 1 11 1C10.8674 1 10.7402 1.05268 10.6464 1.14645C10.5527 1.24021 10.5 1.36739 10.5 1.5V2H5.5V1.5C5.5 1.36739 5.44732 1.24021 5.35355 1.14645C5.25979 1.05268 5.13261 1 5 1C4.86739 1 4.74021 1.05268 4.64645 1.14645C4.55268 1.24021 4.5 1.36739 4.5 1.5V2H3C2.73478 2 2.48043 2.10536 2.29289 2.29289C2.10536 2.48043 2 2.73478 2 3V13C2 13.2652 2.10536 13.5196 2.29289 13.7071C2.48043 13.8946 2.73478 14 3 14H13C13.2652 14 13.5196 13.8946 13.7071 13.7071C13.8946 13.5196 14 13.2652 14 13V3C14 2.73478 13.8946 2.48043 13.7071 2.29289C13.5196 2.10536 13.2652 2 13 2ZM3 3H4.5V3.5C4.5 3.63261 4.55268 3.75979 4.64645 3.85355C4.74021 3.94732 4.86739 4 5 4C5.13261 4 5.25979 3.94732 5.35355 3.85355C5.44732 3.75979 5.5 3.63261 5.5 3.5V3H10.5V3.5C10.5 3.63261 10.5527 3.75979 10.6464 3.85355C10.7402 3.94732 10.8674 4 11 4C11.1326 4 11.2598 3.94732 11.3536 3.85355C11.4473 3.75979 11.5 3.63261 11.5 3.5V3H13V5H3V3ZM13 13H3V6H13V13ZM8 10.25C8.00073 10.5472 7.91315 10.8379 7.74838 11.0853C7.58361 11.3326 7.34907 11.5255 7.07453 11.6393C6.79998 11.7531 6.49781 11.7828 6.20635 11.7247C5.9149 11.6665 5.64729 11.523 5.4375 11.3125C5.34399 11.2188 5.29148 11.0918 5.29148 10.9594C5.29148 10.827 5.34399 10.7 5.4375 10.6062C5.48349 10.5592 5.53841 10.5218 5.59906 10.4963C5.6597 10.4707 5.72483 10.4576 5.79063 10.4576C5.85642 10.4576 5.92155 10.4707 5.98219 10.4963C6.04284 10.5218 6.09776 10.5592 6.14375 10.6062C6.23973 10.698 6.36723 10.7494 6.5 10.75C6.63261 10.75 6.75979 10.6973 6.85355 10.6036C6.94732 10.5098 7 10.3826 7 10.25C7 10.1174 6.94732 9.99021 6.85355 9.89645C6.75979 9.80268 6.63261 9.75 6.5 9.75C6.40604 9.74947 6.31413 9.72248 6.2348 9.67212C6.15548 9.62175 6.09195 9.55005 6.0515 9.46524C6.01106 9.38043 5.99532 9.28594 6.00611 9.1926C6.0169 9.09926 6.05377 9.01085 6.1125 8.9375L6.4625 8.5H5.75C5.61739 8.5 5.49021 8.44732 5.39645 8.35355C5.30268 8.25979 5.25 8.13261 5.25 8C5.25 7.86739 5.30268 7.74021 5.39645 7.64645C5.49021 7.55268 5.61739 7.5 5.75 7.5H7.5C7.59396 7.50053 7.68587 7.52752 7.7652 7.57788C7.84452 7.62825 7.90805 7.69994 7.9485 7.78476C7.98894 7.86957 8.00468 7.96406 7.99389 8.0574C7.9831 8.15074 7.94623 8.23915 7.8875 8.3125L7.3375 9.00625C7.54174 9.14305 7.70907 9.32813 7.82463 9.54509C7.9402 9.76205 8.00044 10.0042 8 10.25ZM10.5 8V11.25C10.5 11.3826 10.4473 11.5098 10.3536 11.6036C10.2598 11.6973 10.1326 11.75 10 11.75C9.86739 11.75 9.74021 11.6973 9.64645 11.6036C9.55268 11.5098 9.5 11.3826 9.5 11.25V9L9.3 9.15C9.19334 9.22797 9.06043 9.26115 8.92965 9.24247C8.79886 9.22378 8.68056 9.15471 8.6 9.05C8.52044 8.94391 8.48627 8.81056 8.50502 8.67929C8.52378 8.54801 8.59391 8.42957 8.7 8.35L9.7 7.6C9.77428 7.54429 9.86262 7.51036 9.9551 7.50202C10.0476 7.49368 10.1406 7.51126 10.2236 7.55279C10.3067 7.59431 10.3765 7.65815 10.4253 7.73713C10.4741 7.81612 10.5 7.90714 10.5 8Z"
                        fill="white"
                      />
                    </svg>
                  </div>
                  <div>{formatDate(new Date(posts[0].createdAt))}</div>
                </div>
                <div className="flex items-center gap-x-[5px]">
                  <div>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                      fill="none"
                    >
                      <path
                        d="M8.00004 1.33333C4.32404 1.33333 1.33337 3.72599 1.33337 6.66666C1.33337 8.60533 2.59871 10.344 4.66671 11.2893V14.6667L8.22671 11.9967C11.798 11.9013 14.6667 9.54666 14.6667 6.66666C14.6667 3.72599 11.676 1.33333 8.00004 1.33333ZM8.00004 10.6667H7.77804L6.00004 12V10.3887L5.57271 10.224C3.78004 9.53399 2.66671 8.17066 2.66671 6.66666C2.66671 4.46066 5.05937 2.66666 8.00004 2.66666C10.9407 2.66666 13.3334 4.46066 13.3334 6.66666C13.3334 8.87266 10.9407 10.6667 8.00004 10.6667Z"
                        fill="white"
                      />
                    </svg>
                  </div>
                  <div>{posts[0].commentsCount}</div>
                </div>
              </div>
              <div className="mt-[30px] text-[26px] font-semibold text-white">
                {posts[0].title}
              </div>
            </div>
          </div>
          <div className="grid gap-y-[10px]">
            {posts.filter((post) => post.id !== 1).map((post) => (
              <div key={post.id} className="flex gap-x-[17px]">
                <div className="w-[125px] h-[100px] relative">
                  <Image 
                    fill
                    alt="view all post" 
                    src={post.thumbnail}
                    className="object-cover"
                  />
                </div>
                <div>
                  <div className="text-[#4F95FF] text-xs font-medium">{post.category}</div>
                  <div className="mt-[6.73px] flex items-center gap-x-[5px]">
                    <div>
                      <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none">
                        <path d="M13.3469 2.41824H11.8928V1.93355C11.8928 1.805 11.8417 1.68171 11.7508 1.59082C11.6599 1.49992 11.5366 1.44885 11.4081 1.44885C11.2795 1.44885 11.1563 1.49992 11.0654 1.59082C10.9745 1.68171 10.9234 1.805 10.9234 1.93355V2.41824H6.07645V1.93355C6.07645 1.805 6.02539 1.68171 5.93449 1.59082C5.84359 1.49992 5.72031 1.44885 5.59176 1.44885C5.46321 1.44885 5.33992 1.49992 5.24903 1.59082C5.15813 1.68171 5.10706 1.805 5.10706 1.93355V2.41824H3.65298C3.39588 2.41824 3.14932 2.52037 2.96752 2.70217C2.78573 2.88396 2.68359 3.13053 2.68359 3.38763V13.0815C2.68359 13.3386 2.78573 13.5852 2.96752 13.767C3.14932 13.9488 3.39588 14.0509 3.65298 14.0509H13.3469C13.604 14.0509 13.8505 13.9488 14.0323 13.767C14.2141 13.5852 14.3162 13.3386 14.3162 13.0815V3.38763C14.3162 3.13053 14.2141 2.88396 14.0323 2.70217C13.8505 2.52037 13.604 2.41824 13.3469 2.41824ZM3.65298 3.38763H5.10706V3.87232C5.10706 4.00087 5.15813 4.12415 5.24903 4.21505C5.33992 4.30595 5.46321 4.35702 5.59176 4.35702C5.72031 4.35702 5.84359 4.30595 5.93449 4.21505C6.02539 4.12415 6.07645 4.00087 6.07645 3.87232V3.38763H10.9234V3.87232C10.9234 4.00087 10.9745 4.12415 11.0654 4.21505C11.1563 4.30595 11.2795 4.35702 11.4081 4.35702C11.5366 4.35702 11.6599 4.30595 11.7508 4.21505C11.8417 4.12415 11.8928 4.00087 11.8928 3.87232V3.38763H13.3469V5.3264H3.65298V3.38763ZM13.3469 13.0815H3.65298V6.29579H13.3469V13.0815ZM8.49992 10.4157C8.50063 10.7038 8.41573 10.9856 8.256 11.2254C8.09628 11.4652 7.86892 11.6521 7.60278 11.7625C7.33664 11.8728 7.04372 11.9016 6.76118 11.8452C6.47865 11.7888 6.21923 11.6497 6.01586 11.4457C5.92522 11.3548 5.87432 11.2317 5.87432 11.1033C5.87432 10.975 5.92522 10.8519 6.01586 10.761C6.06044 10.7154 6.11369 10.6792 6.17247 10.6544C6.23126 10.6297 6.2944 10.6169 6.35818 10.6169C6.42196 10.6169 6.4851 10.6297 6.54388 10.6544C6.60267 10.6792 6.65592 10.7154 6.70049 10.761C6.79353 10.85 6.91713 10.8998 7.04584 10.9004C7.17439 10.9004 7.29767 10.8493 7.38857 10.7584C7.47947 10.6675 7.53053 10.5442 7.53053 10.4157C7.53053 10.2871 7.47947 10.1639 7.38857 10.073C7.29767 9.98206 7.17439 9.931 7.04584 9.931C6.95475 9.93048 6.86566 9.90432 6.78876 9.8555C6.71186 9.80667 6.65028 9.73717 6.61107 9.65496C6.57186 9.57274 6.55661 9.48114 6.56707 9.39066C6.57753 9.30018 6.61327 9.21447 6.6702 9.14337L7.00949 8.71926H6.3188C6.19025 8.71926 6.06697 8.6682 5.97607 8.5773C5.88517 8.4864 5.8341 8.36312 5.8341 8.23457C5.8341 8.10602 5.88517 7.98273 5.97607 7.89184C6.06697 7.80094 6.19025 7.74987 6.3188 7.74987H8.01523C8.10631 7.75038 8.19541 7.77655 8.2723 7.82537C8.3492 7.8742 8.41078 7.9437 8.44999 8.02591C8.4892 8.10813 8.50445 8.19973 8.49399 8.29021C8.48354 8.38069 8.44779 8.4664 8.39086 8.5375L7.8577 9.21001C8.05569 9.34262 8.21789 9.52204 8.32992 9.73236C8.44195 9.94268 8.50034 10.1774 8.49992 10.4157ZM10.9234 8.23457V11.3851C10.9234 11.5136 10.8723 11.6369 10.7814 11.7278C10.6905 11.8187 10.5672 11.8698 10.4387 11.8698C10.3101 11.8698 10.1869 11.8187 10.096 11.7278C10.0051 11.6369 9.954 11.5136 9.954 11.3851V9.20395L9.76012 9.34936C9.65673 9.42494 9.52789 9.45711 9.40111 9.439C9.27433 9.42089 9.15965 9.35393 9.08155 9.25242C9.00442 9.14959 8.97131 9.02032 8.98949 8.89306C9.00766 8.7658 9.07565 8.65098 9.17849 8.57385L10.1479 7.84681C10.2199 7.7928 10.3055 7.75992 10.3952 7.75183C10.4848 7.74375 10.5749 7.76079 10.6555 7.80104C10.736 7.8413 10.8037 7.90318 10.851 7.97975C10.8983 8.05632 10.9234 8.14455 10.9234 8.23457Z" fill="#666666"/>
                      </svg>
                    </div>
                    <div className="text-[#666666] text-xs">{formatDate(new Date(post.createdAt))}</div>
                  </div>
                  <div className="mt-[7.27px] text-white text-xl font-medium">{post.title}</div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  )
}